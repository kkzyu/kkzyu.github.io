import{_ as te}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as u,h as ne,E as le,c as oe,b as l,a as R,o as ae}from"./index-BnOss31M.js";const se={class:"main-container"},re={class:"game-container"},ie={class:"control-panel"},ce={class:"score-board"},de={class:"current-score"},ue={class:"controls"},fe={class:"modal-content"},n=25,S=17,_=17,he={__name:"GreedySnake",setup(ve){const b=u(null),E=u(null),M=u(null),G=u(null),P=u(null),A=u(null),F=u(0),K=u(null),H=u(null),B={width:_*n,height:S*n};let o,r=n*5,i=n*5,f=0,h=0,a=[],C,L,s=0,O=!1,v=JSON.parse(localStorage.getItem("snakeHighScores"))||[],d,m=!1,c=null,k=!1,p=10;ne(()=>{Y(),U()}),le(()=>{$()});function Y(){b.value.height=S*n,b.value.width=_*n,o=b.value.getContext("2d"),M.value.textContent="Pause",y(),I(),p=8,d=setInterval(x,1e3/p)}function $(){var e,t,g,X;clearInterval(d),document.removeEventListener("keyup",T),(e=M.value)==null||e.removeEventListener("click",pauseHandler),(t=E.value)==null||t.removeEventListener("click",startHandler),(g=G.value)==null||g.removeEventListener("click",w),(X=P.value)==null||X.removeEventListener("click",w)}function x(){if(O||m)return;const e=o.createLinearGradient(0,0,B.width,B.height);e.addColorStop(0,"#f8bbd0"),e.addColorStop(1,"#b3e5fc"),o.fillStyle=e,o.fillRect(0,0,B.width,B.height),j(),J(),ee(),o.fillStyle="white",o.beginPath(),o.roundRect(r,i,n,n,5),o.fill();for(let t=0;t<a.length;t++)o.beginPath(),o.roundRect(a[t][0],a[t][1],n,n,5),o.fill();q(),Q()}function I(){Math.random()<.2?c={x:Math.floor(Math.random()*_)*n,y:Math.floor(Math.random()*S)*n,type:["speed","double","shield"][Math.floor(Math.random()*3)]}:(C=Math.floor(Math.random()*_)*n,L=Math.floor(Math.random()*S)*n,c=null)}function j(){o.fillStyle="yellow",o.fillRect(C,L,n,n),c&&(o.fillStyle={speed:"#00ffff",double:"#ff00ff",shield:"#ffff00"}[c.type],o.beginPath(),o.arc(c.x+n/2,c.y+n/2,n/2,0,Math.PI*2),o.fill())}function J(){if(r===C&&i===L){V();return}c&&r===c.x&&i===c.y&&(z(c.type),I())}function V(){a.push([C,L]),s+=1,N(),y(),I()}function z(e){switch(s+=2,e){case"speed":p+=2,N();break;case"double":a.push(...Array(2).fill([r,i]));break;case"shield":k=!0,setTimeout(()=>k=!1,5e3);break}y()}function U(){const e=()=>{d||(d=setInterval(x,1e3/p)),alert(`🐍 贪吃蛇游戏规则说明：
🎮 基本玩法——
1. 移动控制
🕹️ 键盘方向键：w a s d 控制蛇的移动方向
📱 触屏用户：在游戏区域滑动即可控制方向
⚠️ 禁止反向移动：不能直接180度调头（如向下移动时不能立即向上）
2. 得分机制
🟡 普通食物：+1分（黄色方块）
🔵 加速食物：+2分（蓝色圆球）并提升移动速度15秒
🟣 双倍食物：+2分（紫色圆球）使蛇身增长双倍长度
🛡️ 护盾食物：+2分（金色圆球）获得5秒碰撞免疫
成长系统
每吃1个食物蛇身增长1节
双倍食物可使蛇身额外多增长1节
蛇身最大长度无上限
⚠️ 失败条件
碰撞边界：蛇头触碰游戏区域边缘（护盾激活时除外）
自我吞噬：蛇头触碰自己身体（护盾激活时除外）
紧急停止：点击暂停按钮可随时冻结游戏
🏆 进阶系统
①每获得5分速度提升1级
②速度等级显示在计分板（最高20级）
③游戏重启后恢复初始速度`)};E.value.addEventListener("click",e),document.addEventListener("keyup",T);const t=function(){m=!m,this.textContent=m?"Continue":"Pause",y()};M.value.addEventListener("click",t),G.value.addEventListener("click",w),P.value.addEventListener("click",w)}function w(){clearInterval(d),r=n*5,i=n*5,a=[],f=0,h=0,s=0,p=8,O=!1,m=!1,k=!1,I(),y(),d=setInterval(x,1e3/p),H.value.style.display="none"}function N(){const e=p+Math.floor(s/5);clearInterval(d),d=setInterval(x,1e3/e)}function y(){F.value.textContent=s,F.value.classList.toggle("highlight",s>Math.max(...v)),K.value.innerHTML=v.sort((e,t)=>t-e).slice(0,5).map((e,t)=>`<ol class="${e===s?"current-highlight":""}">Rank ${t+1}: ${e}</ol>`).join("")}function W(){s>0&&(v.length<5||s>=Math.min(...v))&&(v.push(s),v=v.sort((e,t)=>t-e).slice(0,5),localStorage.setItem("snakeHighScores",JSON.stringify(v)))}function q(){!k&&(r<0||r>=_*n||i<0||i>=S*n)&&D()}function Q(){!k&&a.some(e=>e[0]===r&&e[1]===i)&&D()}function D(){O=!0,clearInterval(d),W(),Z()}function Z(){A.value.textContent=s,H.value.style.display="block",y()}function T(e){var g;if(m)return;const t={KeyW:()=>h!==1&&(f=0,h=-1),KeyS:()=>h!==-1&&(f=0,h=1),KeyA:()=>f!==1&&(f=-1,h=0),KeyD:()=>f!==-1&&(f=1,h=0)};(g=t[e.code])==null||g.call(t)}function ee(){for(let e=a.length-1;e>0;e--)a[e]=[...a[e-1]];a.length&&(a[0]=[r,i]),r+=f*n,i+=h*n}return(e,t)=>(ae(),oe("div",se,[t[4]||(t[4]=l("h1",null,[l("div",{class:"geeks"},"Greedy"),R("snake ")],-1)),l("div",re,[l("canvas",{ref_key:"boardCanvas",ref:b},null,512),l("div",ie,[l("div",ce,[t[1]||(t[1]=l("h3",null,"Score Board",-1)),l("ol",{ref_key:"highScoresList",ref:K},null,512),l("div",de,[t[0]||(t[0]=R("Current Score: ")),l("span",{ref_key:"currentScore",ref:F},"0",512)])]),l("div",ue,[l("button",{ref_key:"startBtn",ref:E},"Start",512),l("button",{ref_key:"pauseBtn",ref:M},"Pause",512),l("button",{ref_key:"restartBtn",ref:G},"Restart",512)])]),l("div",{ref_key:"gameOverModal",ref:H,class:"modal"},[l("div",fe,[t[3]||(t[3]=l("h2",null,"Game Over",-1)),l("p",null,[t[2]||(t[2]=R("Final Score: ")),l("span",{ref_key:"finalScore",ref:A},"0",512)]),l("button",{ref_key:"playAgainBtn",ref:P},"Play Again",512)])],512)])]))}},ye=te(he,[["__scopeId","data-v-a095a526"]]);export{ye as default};
